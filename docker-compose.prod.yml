# ZGRAD.gg Production Overrides
#
# Usage: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d
#
# This file contains production-specific overrides:
# - Nginx reverse proxy with SSL
# - Production optimizations

services:
  zgrad:
    restart: always
    # Don't expose port directly in production - use nginx
    ports: []
    networks:
      - zgrad

  nginx:
    image: nginx:alpine
    container_name: zgrad-nginx
    restart: always
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./nginx/ssl:/etc/nginx/ssl:ro
      - zgrad-data:/app/server/data:ro
    depends_on:
      - zgrad
    networks:
      - zgrad-network
    healthcheck:
      test: ["CMD", "nginx", "-t"]
      interval: 30s
      timeout: 10s
      retries: 3

networks:
  zgrad-network:
    driver: bridge

volumes:
  zgrad-data:

